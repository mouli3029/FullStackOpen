{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["Filter","setSearch","search","type","onChange","e","target","value","PersonForm","setNewName","newName","setNewNum","newNum","handleNameSubmit","onClick","Persons","persons","handleDelete","length","filter","person","name","toLowerCase","includes","map","number","id","baseUrl","axios","get","then","res","data","newEntry","post","delete","response","put","Notification","message","errMess","console","log","className","App","useState","setPersons","setMessage","setErrMess","getAll","personService","create","deleteEntry","updateEntry","updateNum","find","per","setTimeout","catch","err","useEffect","preventDefault","matched","window","confirm","newPerson","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.bbaddf60.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst Filter = ({setSearch,search}) => {\r\n    return(\r\n    <form>\r\n       filter shown with <input type='text' onChange={(e)=>setSearch(e.target.value)} value={search}/>\r\n    </form>\r\n    )\r\n}\r\nexport default Filter","import React from 'react'\r\n\r\nconst PersonForm = ({setNewName,newName,setNewNum,newNum,handleNameSubmit}) => {\r\n    return (\r\n        <form>\r\n        <div>\r\n          name: <input type=\"text\" onChange={e => setNewName(e.target.value)} value={newName}/>\r\n        </div>\r\n        <div>\r\n          number: <input type=\"text\" onChange={e=> setNewNum(e.target.value)} value={newNum} />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\" onClick={handleNameSubmit}>add</button>\r\n        </div>\r\n      </form>\r\n    )\r\n}\r\n\r\nexport default PersonForm\r\n","import React from 'react'\r\n\r\nconst Persons = ({persons,search,handleDelete}) => {\r\n    return (\r\n        <>\r\n        {\r\n            persons.length > 0 ? \r\n             persons.filter(person=> person.name.toLowerCase().includes(search.toLowerCase()))\r\n             .map(person => <p key={person.id}> {person.name} {person.number} <button onClick={(e)=>handleDelete(e,person)}> delete </button> </p>\r\n             )\r\n             : \r\n             <p>No entries</p>\r\n          }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Persons\r\n","import axios from 'axios';\r\nconst baseUrl = 'http://localhost:3001/api/persons'\r\n\r\nconst getAll = () => {\r\n    const req = axios.get(`${baseUrl}`)\r\n    return req.then(res => res.data)\r\n}\r\n\r\nconst create = (newEntry) => {\r\n    const req = axios.post(`${baseUrl}`,newEntry);\r\n    return req.then((res)=> res.data)\r\n}\r\n\r\nconst deleteEntry = (id) =>{\r\n    const req = axios.delete(`${baseUrl}/${id}`)\r\n    return req.then(response => response.data)\r\n}\r\n\r\nconst updateEntry = (id,newEntry) => {\r\n    const req = axios.put(`${baseUrl}/${id}`,newEntry)\r\n    return req.then(response => response.data)\r\n}\r\n\r\nexport default {getAll, create,deleteEntry,updateEntry}","import React from 'react';\r\n\r\nconst Notification = ({message,errMess}) => {\r\n    console.log(errMess)\r\n    return(\r\n        <>\r\n        {message && \r\n          <div className=\"success\">\r\n              {message}\r\n          </div>\r\n        }\r\n        {errMess && \r\n          <div className=\"error\">\r\n              {errMess}\r\n          </div>\r\n        }\r\n\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Notification;","import React, { useState,useEffect } from 'react'\r\nimport Filter from './components/Filter';\r\nimport PersonForm from './components/PersonForm';\r\nimport Persons from './components/Persons';\r\nimport personService from '../src/services/persons';\r\nimport './App.css'\r\nimport Notification from './components/Notification';\r\n\r\nconst App = () => {\r\n  const [persons, setPersons ] = useState([]) \r\n  const [newName, setNewName ] = useState('');\r\n  const [newNum,setNewNum] = useState('');\r\n  const [search,setSearch] = useState('');\r\n  const [message,setMessage] = useState('');\r\n  const [errMess,setErrMess] = useState('')\r\n  \r\n  const {getAll,create,deleteEntry,updateEntry} = personService;\r\n\r\n  // ADD\r\n  const handleNameSubmit = (e) => {\r\n    e.preventDefault();\r\n    const matched = persons.filter(person => person.name.toLowerCase() === newName.toLowerCase())\r\n\r\n    if(matched.length > 0){\r\n      console.log(matched[0].number,newNum);\r\n      if(matched[0].number !== newNum){\r\n        if(window.confirm(`${matched[0].name} is already added to phonebook, replace the old number with a new one?`)){\r\n          updateNum(matched[0].id);\r\n          return ;\r\n        }\r\n        else{\r\n          return ;\r\n        }\r\n      }\r\n      else{\r\n        return ;\r\n      }\r\n    }\r\n\r\n    const newEntry = {name : newName,number : newNum}\r\n    create(newEntry)\r\n    .then((newPerson)=>{\r\n      setPersons(persons => [...persons,newPerson])\r\n      setMessage( `Added ${newPerson.name}`);\r\n\r\n      setTimeout(()=>{\r\n        setMessage(\"\")\r\n      },2000)\r\n    })\r\n\r\n    setNewName('')\r\n    setNewNum('')\r\n  }\r\n\r\n\r\n  // UPDATE \r\n  const updateNum = (id) => {\r\n    const person = persons.find(per => per.id === id);\r\n    const newEntry = {...person,number:newNum}\r\n    updateEntry(id,newEntry)\r\n    .then(data => {\r\n      setPersons(persons.map(per => per.id !== person.id ? per : data))\r\n      setMessage(`Updated ${data.name}`)\r\n\r\n      setTimeout(()=>{\r\n        setMessage(\"\")\r\n      },2000)\r\n    })\r\n    .catch(err=> {\r\n      setErrMess(`Information of ${person.name} has already been removed from server`)\r\n      setTimeout(()=>{\r\n        setErrMess('')\r\n      },2000)\r\n    })\r\n  }\r\n\r\n  // DELETE\r\n  const handleDelete = (e,person) => {\r\n    const id = person.id;\r\n    e.preventDefault();\r\n    let canDelete = window.confirm(`Delete ${person.name}`);\r\n    if(canDelete){\r\n      deleteEntry(id)\r\n      .then(() => setPersons(persons.filter(person=> person.id !== id)))\r\n      .catch(err=> {\r\n        setErrMess(`Information of ${person.name} has already been removed from server`)\r\n      })\r\n    }\r\n  }\r\n\r\n  // GET\r\n  useEffect(() => {\r\n    getAll()\r\n    .then(persons => {\r\n      setPersons(persons)\r\n    })\r\n    .catch((e)=> console.log(e))\r\n  }, [])\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification message={message} errMess={errMess}/>\r\n      <Filter setSearch={setSearch} search={search}/>\r\n      <h3>add a new</h3>\r\n      <PersonForm setNewName={setNewName} setNewNum={setNewNum} newName={newName} newNum={newNum} handleNameSubmit={handleNameSubmit} />\r\n      <h3>Numbers</h3>\r\n      <Persons persons={persons} search={search} handleDelete={handleDelete}/>\r\n{/*       {persons.map(person => <p key={person.name}>{person.name}  {person.number}</p>)} */}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}