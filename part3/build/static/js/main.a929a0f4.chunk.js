(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),o=n(15),a=n.n(o),u=n(6),i=n(3),s=n(0),d=function(e){var t=e.setSearch,n=e.search;return Object(s.jsxs)("form",{children:["filter shown with ",Object(s.jsx)("input",{type:"text",onChange:function(e){return t(e.target.value)},value:n})]})},j=function(e){var t=e.setNewName,n=e.newName,c=e.setNewNum,r=e.newNum,o=e.handleNameSubmit;return Object(s.jsxs)("form",{children:[Object(s.jsxs)("div",{children:["name: ",Object(s.jsx)("input",{type:"text",onChange:function(e){return t(e.target.value)},value:n})]}),Object(s.jsxs)("div",{children:["number: ",Object(s.jsx)("input",{type:"text",onChange:function(e){return c(e.target.value)},value:r})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",onClick:o,children:"add"})})]})},b=function(e){var t=e.persons,n=e.search,c=e.handleDelete;return Object(s.jsx)(s.Fragment,{children:t.length>0?t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())})).map((function(e){return Object(s.jsxs)("p",{children:[" ",e.name," ",e.number," ",Object(s.jsx)("button",{onClick:function(t){return c(t,e)},children:" delete "})," "]},e.id)})):Object(s.jsx)("p",{children:"No entries"})})},h=n(4),f=n.n(h),l="/api/persons",m=function(){return f.a.get("".concat(l)).then((function(e){return e.data}))},O=function(e){return f.a.post("".concat(l),e).then((function(e){return e.data}))},p=function(e){return f.a.delete("".concat(l,"/").concat(e)).then((function(e){return e.data}))},x=function(e,t){return f.a.put("".concat(l,"/").concat(e),t).then((function(e){return e.data}))},v=(n(39),function(e){var t=e.message,n=e.errMess;return console.log(n),Object(s.jsxs)(s.Fragment,{children:[t&&Object(s.jsx)("div",{className:"success",children:t}),n&&Object(s.jsx)("div",{className:"error",children:n})]})}),w=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)(""),a=Object(i.a)(o,2),h=a[0],f=a[1],l=Object(c.useState)(""),w=Object(i.a)(l,2),g=w[0],N=w[1],S=Object(c.useState)(""),C=Object(i.a)(S,2),k=C[0],y=C[1],D=Object(c.useState)(""),T=Object(i.a)(D,2),L=T[0],M=T[1],A=Object(c.useState)(""),E=Object(i.a)(A,2),F=E[0],I=E[1],J=m,B=O,P=p,U=x,q=function(e){var t=n.find((function(t){return t.id===e})),c=Object(u.a)(Object(u.a)({},t),{},{number:g});U(e,c).then((function(e){r(n.map((function(n){return n.id!==t.id?n:e}))),M("Updated ".concat(e.name)),setTimeout((function(){M("")}),2e3)})).catch((function(e){I(e.response.data.error),setTimeout((function(){I("")}),2e3)}))};return Object(c.useEffect)((function(){J().then((function(e){r(e)})).catch((function(e){return console.log(e)}))}),[]),Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(v,{message:L,errMess:F}),Object(s.jsx)(d,{setSearch:y,search:k}),Object(s.jsx)("h3",{children:"add a new"}),Object(s.jsx)(j,{setNewName:f,setNewNum:N,newName:h,newNum:g,handleNameSubmit:function(e){e.preventDefault();var t=n.filter((function(e){return e.name.toLowerCase()===h.toLowerCase()}));if(t.length>0)return console.log(t[0].number,g),t[0].number!==g&&window.confirm("".concat(t[0].name," is already added to phonebook, replace the old number with a new one?"))?void q(t[0].id):void 0;B({name:h,number:g}).then((function(e){r(n.concat(e)),console.log("Added"),M("Added ".concat(e.name)),setTimeout((function(){M("")}),2e3)})).catch((function(e){I(e.response.data.error),setTimeout((function(){I("")}),2e3)})),f(""),N("")}}),Object(s.jsx)("h3",{children:"Numbers"}),Object(s.jsx)(b,{persons:n,search:k,handleDelete:function(e,t){var c=t.id;e.preventDefault(),window.confirm("Delete ".concat(t.name))&&P(c).then((function(){return r(n.filter((function(e){return e.id!==c})))})).catch((function(e){I("Information of ".concat(t.name," has already been removed from server")),setTimeout((function(){I("")}),2e3)}))}})]})};a.a.render(Object(s.jsx)(r.a.StrictMode,{children:Object(s.jsx)(w,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.a929a0f4.chunk.js.map